# Consolidate contact info
# Use 1 URI instead of different blank nodes / genid

PREFIX dcat: <http://www.w3.org/ns/dcat#>
PREFIX vcard: <http://www.w3.org/2006/vcard/ns#>

DELETE 
	{	?dataset dcat:contactPoint ?gencontact .
		?gencontact vcard:organization-name ?name .
		?gencontact ?p ?o }
INSERT
	{	?s dcat:contactPoint ?contact .
		?contact a vcard:Organization .
		?contact vcard:organization-name ?name .
		?contact ?p ?o }
WHERE
	{ 	?dataset dcat:contactPoint ?gencontact .
		?gencontact ?p ?o .
		?gencontact vcard:organization-name ?name .
		BIND(IRI(
				CONCAT("http://data.gov.be/.well-known/genid/contact/", SHA1(LCASE(?name)))
			)
		AS ?contact)
	}
